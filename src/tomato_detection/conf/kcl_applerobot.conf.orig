loopRate = 50.0;           # Hz

<<<<<<< HEAD
linearErrorThreshold = 0.01; #0.01;       # m
angularErrorThreshold = 0.01; #0.1;     # rad

cartesianMoveTimeout = 280.0;   #sec
#saturationMax = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0];
#saturationMin = [-0.6, -0.6, -0.6, -0.6, -0.6, -0.6, -0.6, -0.6];
saturationMax = [0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4];
saturationMin = [-0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4, -0.4];
positionGainJoints = 1.0
=======
linearErrorThreshold = 0.05; #0.01;       # m
angularErrorThreshold = 0.01; #0.1;     # rad

cartesianMoveTimeout = 20.0;   #sec
#saturationMax = [0.4, 0.4, 0.4, 0.4, 0.4, 0.4];
#saturationMin = [-0.4, -0.4, -0.4, -0.4, -0.4, -0.4];
saturationMax = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0];
saturationMin = [-1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0];
positionGainJoints = 20.0
>>>>>>> controller_tpik_EXP
positionGainCart = 5.0

states: {


}

### A task can be:
### - Reactive
### - NonReactive

### A NonReactive task must have: 
### - gain(irrelevant for non reactive task but must be present)
### - enable
### - saturation
### - saturateRaferenceRateComponentWise [*optional*]

### A Reactive task must have:
### - type: - 0, equality task
###         - 1, inequality task. For an inequality task you must be specify: - greaterThanParams, x >= x_bar (decreasingBellShaped, e.g. Avoidance)
###									                                          - lessThanParams, x <= x_bar    (increasingBellShaped)
###                                                                           - greaterThanParams and lessThanParams, x_barMin <= x <= x_barMax
### - gain
### - enable
### - saturation
### - saturateRaferenceRateComponentWise [*optional*]

### For task of cartesianDistance and cartesianOrientation type is present another option:
### - useVirtualFrame: define a virtual frame to follow instead of giving the final pose of the point to reach.
### - if is true, you have to specify: - virtualFrameType, 0: FullPose, 1: Angular, 2:Linear
###                                    - virtualFrameGain
###                                    - virtualFrameSampleTime
###                                    - onTrackAllowedDistance
###                                    - crossTrackAllowedDistance

### For tasks of type *JointsLimit insted* of specify greater/lessThanParams we need to specify:
### - activationStartDistanceGreaterThanParams, the distance from min joints bound at which we want our activation decreasing function starting
### - activationStartDistanceLessThanParams, the distance from max joints bound at which we want our increasing activation function starting
### - activationIntervalLengthGreaterThenParams, the length of the decreasing activation function interval
### - activationIntervalLengthLessThenParams, the length of the increasing activation function interval

tasks: {

    JointsLimit: {
        type = 1;     # 0 equality, 1 inequality
        gain = 0.02;
        enable = true;
        saturation = 0.05;
        #saturateRaferenceRateComponentWise = true; #if you want this option active, you have to explicitly add this field,
                                                    # otherwise do not enter the param in the task
        activationStartDistanceGreaterThanParams = [0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05];
        activationStartDistanceLessThanParams = [0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05];
        activationIntervaLengthGreaterThanParams = [0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02];
        activationIntervaLengthLessThanParams = [0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02];
    }
    
    ObstacleAvoidance: {
        type = 1;     # 0 equality, 1 inequality
        gain = 0.05;
        enable = true;
        saturation = 0.05;
        greaterThanParams: {
            xmin = [0.0,0.00];
            xmax = [0.05,0.05];
        }
    }
    
    
    JointsPosition: {
        type = 0;     # 0 equality, 1 inequality
<<<<<<< HEAD
        gain = 1.0
        enable = true;
        saturation = 0.4;
=======
        gain = 4.0;
        enable = true;
        saturation = 1.0;
>>>>>>> controller_tpik_EXP
    }
    
    
    JointsVelocity: {
        type = 0;     # 0 equality, 1 inequality
        gain = 0.1;
        enable = true;
        saturation = 0.02;
    }
    
    
    ToolCartesianDistance: {
        type = 0;     # 0 equality, 1 inequality
        gain = 0.05;
        enable = true;
        saturation = 0.6; 
        #saturateRaferenceRateComponentWise = true; #if you want this option active, you have to explicitly add this field, otherwise do not enter the param in the task
        useVirtualFrame = false; 
        virtualFrameType = 2;  #0: FullPose, 1: Angular, 2:Linear
        virtualFrameGain= [0.15,0.15];
        virtualFrameSampleTime = 0.1;
        onTrackAllowedDistance = [4.0, 4.5];
        crossTrackAllowedDistance = [0.05, 1.0];
    }
     
    ToolCartesianOrientation: {
        type = 0;     # 0 equality, 1 inequality
        gain = 0.4;
        enable = true;
        saturation = 10.0;
        #saturateRaferenceRateComponentWise = true; #if you want this option active, you have to explicitly add this field, otherwise do not enter the param in the task
        useVirtualFrame = false; 
        virtualFrameType = 1;  #0: FullPose, 1: Angular, 2:Linear
        virtualFrameGain= [0.15,0.15];
        virtualFrameSampleTime = 0.1;
        onTrackAllowedDistance = [4.0, 4.5];
        crossTrackAllowedDistance = [0.05, 1.0];
    }
    

}


priorityLevels: (

    { name: "PL_Safety";
        tasks = ["JointsLimit"];
        #tasks = ["ObstacleAvoidance"];
        lambda = 0.0001;
        threshold = 0.01;
    },

    { name: "PL_MoveJointsPosition";
        tasks: ["JointsPosition"];
        lambda = 1.0;
        threshold = 0.01;
    },
        
   { name: "PL_MoveJointsVelocity";
        tasks: ["JointsVelocity"];
        lambda = 0.0001;
        threshold = 0.01;
    },
        
    { name: "PL_MoveTool";
        tasks: ["ToolCartesianDistance","ToolCartesianOrientation"];
        lambda = 0.0001;
        threshold = 0.01;
    }
);


actions: (

    {  name: "Idle";
        levels: ["PL_Safety"];
    },
       
    {  name: "ParkUnpark";
        levels: ["PL_MoveJointsPosition"];
    },
       
    {  name: "MoveJointsPosition";
<<<<<<< HEAD
        #levels: ["PL_Safety", "PL_MoveJointsPosition"];
        levels: [ "PL_MoveJointsPosition"];
=======
        levels: ["PL_Safety", "PL_MoveJointsPosition"];
        #levels: ["PL_MoveJointsPosition"];
>>>>>>> controller_tpik_EXP
    },
       
    {  name: "MoveJointsVelocity";
        levels: ["PL_Safety", "PL_MoveJointsVelocity"];
    },

    {  name: "MoveTool";
        levels: [ "PL_MoveTool"];
    }

);
